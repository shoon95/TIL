# 2024-01-08

## 네트워크

### GSLB 구성 방식

1. 도메인 자체를 GSLB로 사용
2. 도메인 내의 특정 레코드만 GSLB를 사용
   1. 별칭(Alias) 사용(CNAME 레코드 사용)
   2. 위임(Delegation) 사용(NS 레코드 사용)



### GSLB 분산 방식

* 서비스 제공 가능 여부를 체크해 트래픽 분산
* 지리적으로 멀리 떨어진 다른 데이터 센터에 트래픽 분산
* 지역적으로 가까운 서비스에 접속해 더 빠른 서비스 제공 가능하도록 분산



### DHCP

> IP를 동적으로 할당하는데 사용되는 프로토콜

* BOOTP 프로토콜 기반

* 클라이언트 서비스 포트 : 68
* 서버의 서비스 포트 : 67 

### DHCP 동작 방식

1. DHCP Discover
   * DHCP 클라이언트는 DHCP 서버를 찾기 위해 DHCP Discover 메시지를 브로드캐스트로 전달
   * IP가 아직 없으므로 출발지는 Zero IP 주소(0.0.0.0), 목적지는 브로드캐스트 주소(255.255.255.255)
   * 출발지 UDP : 68, 도착지 UDP : 67
2. DHCP Offer
   * DHCP Discover를 수신한 DHCP 서버는 클라이언트에 할당할 IP 주소와 서브넷, 게이트웨이 등의 정보를 포함한 DHCP 메시지를 클라이언트로 전송
3. DHCP Request
   * DHCP 서버로부터 제안받은 IP 주소와 DHCP 서버 정보를 포함한 HDCP 요청 메시지를 브로드캐스트로 전송
4. DHCP Acknowledgement
   * 클라이언트로부터 IP 주소를 사용하겠다는 요청을 받으면 DHCP 서버에 해당 IP를 어떤 클라이언트가 언제부터 사용하기 시작했는지 정보를 기록하고 DHCP Request 메시지를 정상적으로 수신했다는 응답 전송

* IP 임대 
  * 클라이언트가 IP를 사용하는 도중에 임대 시간이 만료되면 사용하던 IP는 다시 수거되고 클라이언트는 다이 처음부터 DHCP Discover부터  시작해 IP를 재할당 받음
  * 갱신 과정으로 거쳐 IP주소가 IP 풀에 다시 반환되지 않고 계속 사용하는 경우도 있음
    * 임대 시간의 50%가 지나면 DHCP 갱신 과정을  수행
    * 이미 사용 중인 IP 정보가 있어 DHCP Discover와 DHCP Offer 과정을 생략하고 DHCP Request를 DHCP로 곧바로 전송하고DHCP 서버에서는 DHCK ACK를 보내면서 갱신 과정 진행
    * 만약 50%가 지난 시점에서 갱신을 실패하면 남은 시간의 50% 지점에서 다시 갱신을 시도하고, 이때도 실패하면 추가 갱신 없이 임대 시간이 모두 지난 후에 IP 반납하고 처음부터 IP를 할당 받음
* DHCP 릴레이 에이전트
  * DHCP 서버 한 대로 여러 네트워크 대역에서 IP 풀을 관리하는 기능
  * DHCP 클라이언트와 DHCP 서버가 서로 다른 대역에 있는 경우, DHCP 패킷을 중간에서 중계하는 역할을 수행



### 정보 보안의 정의

* 3대 보안 정의 (보안의 필수 요소)
  * 기밀성(Confidentiality) : 인가되지 않은 사용자가 정보를 보지 못하게 하는 작업
    * 암호화 작업
  * 무결성(Integrity) : 정확하고 완전한 정보 유지에 필요한 모든 작업
    * 누군가 정보를 고의로 훼손하거나 중간에 특정 이유로 변경이 가해졌을 때, 그것을 파악해 잘못된 정보가 전달되거나 유지되지 못하게 하는 것
    * MID5, SHA
  * 가용성(Availability) : 정보가 필요할 때, 접근을 허락하는 일련의 작업



### 네트워크 보안의 주요 개념

* 트러스트 네트워크 : 외부로부터 보호받아야 할 네트워크
* 언트러스트 네트워크 : 신뢰할 수 없는 외부 네트워크
* DMZ(DeMilitarized Zone) 네트워크 : 내부 네트워크이지만 신뢰할 수 없는 외부 사용자에게 개방해야하는 서비스

* 네트워크 보안 분야는 트래픽의 방향과 용도에 따라 두 가지로 나누어짐
  * 인터넷 시큐어 게이트웨이
    * 트러스트(또는 DMZ) 네트워크에서 언트러스트 네트워크로의 통신을 통제
    * 방화벽, SWG(Secure Web Gateway), 웹 필터(Web Filter), 애플리케이션 컨트롤(Application Control), 샌드박스(Sandbox)
    * 내부 사용자가 외부로 통신할 때 사용
  * 데이터 센터 시큐어 게이트웨이
    * 언트러스트 네트워크에서 트러스트(또는 DMZ)로의 통신을 통제
    * 방화벽, IPS, DCSG(DataCenter Secure Gateway), WAF(Web Application Firewall), ANti-DDoS(Distribute Denial of Service)
    * 외부 사용자용 서비를 만들어 외부에 공개할 때 사용
* 네트워크 보안 정책 수립에 따른 분류
  * 화이트리스트(White List) : 방어에 문제가 없다고 명확히 판단되는 통신만 허용
  * 블랙리스트(Black List) : 공격이라고 명확히 판단되거나 문제가 있었던 IP 리스트나 패킷 리스트를 기반으로 데이터베이스를 만들고 그 정보를 방어하는 형태

### DDoS 방어 장비

* DoS(Denial of Service) 공격 : 다양한 방법으로 공격 목표에 서비스 부하를 가해 정상적인 서비스를 방해하는 공격 기법
* DDoS 장비 : 데이터 센터 네트워크 내부와 외부의 경계에서 공격을 방어
  * 볼류메트릭 공격(Volumetric Attack)을 막기 위함
  * 볼류메트릭 공격(Volumetric Attack) : 회선 사용량이나 그 이상의 트래픽을 과도하게 발생시켜 회선 사용을 방해하는 공격

### 방화벽

* 4계층에서 동작하는 패킷 필터링 장비
* 3, 4 계층 정보를 기반으로 정책을 세울 수 있고 해당 정책과 매치되는 패킷이 방화벽을 통과하면 그 패킷을 허용하거나 거부할 수 있음
* 일반적으로 방화벽은 DDos 방어 장비 바로 뒤에 놓음



### IDS, IPS

> IDS (intrusion Detection System: 침입 탐지 시스템)
>
> IPS(Intrusion Prevention System: 침입 방지 시스템)

* 방화벽에서 방어할 수 없는 다양한 애플리케이션 공격을 벙어하는 장비
* 최근에는 애플리케이션 공격을 방어하는 장비를 IPS로 통칭



### WAF

* 웹 서버를 보호하는 전용 보안 장비로 웹 서버에서 동작하는 웹 프로토콜의 공격을 방어