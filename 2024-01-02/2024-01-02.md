# 2024-01-02

## network

### 서브넷과 게이트웨이

> 네트워크간 통신에 사용하는 장비를 게이트웨이라고 함. 3계층 장비인 라우터가 이 역할을 수행

* 게이트웨이는 ARP 브로드캐스트를 차단
* 같은 네트워크 통신 (레이어 2 통신)
  * 상대방의 MAC 주소를 알아내기 위해 ARP 브로드캐스트를 이용하고 상대방의 MAC 주소를 알아내자마자 패킷이 캡슐화되어 통신이 시작 (스위치가 수행)
* 다른 네트워크(원격지) 통신 (레이어 3 통신)
  * ![image-20240102104015234](C:\Users\User\AppData\Roaming\Typora\typora-user-images\image-20240102104015234.png)

### 스위치(2계층 장비)

> mac주소를 기반으로 패킷을 전달하는 기본 동작 수행

* 2계층에서 이더넷 헤더 + 데이터 + 트레일러 = 프레임 (프로토컬 데이터 유닛 PDU)
  * 1계층 : 비트 
  * 
  * 3계층 : 패킷
  * 4계층 : 세그먼트
  * 5, 6, 7 계층 : 데이터
* 전이중 통신 방식 : 데이터의 송신과 수신을 동시에 수행 (회선 두 개 사용)
* 스위치는 포트 번호와 mac 주소를 맵핑 (MAC 주소 테이블) : 주소 학습 기능(address learning) 존재 
  * 만약 아직 mac주소가 맵핑이 되지 않으면 송신 포트 이외 모든 포트에 데이터(프레임) 전송을 함 (플러딩) 이후 주소 저장
* 스위치
  * VLAN
    * 유니캐스트, 멀티캐스트, 브로드캐스트 전부 VLAN 단위를 넘어갈 수 없음

* STP(Spanning Tree Protocol)

  * SPoF를 피하기 위해 스위치 두 대 이상으로 네트워크를 디자인 

    * 루프

      > * 네트워크에 연결된 모양이 고리처럼 되돌아오는 형태

### 라우터(3계층 장비)



## 리눅스

* 하드웨어 -> 커널 -> 쉘 -> 응용프로그램

```shell
### 명령어
shutdown -P +10 # 10분 후에 종료
shutdown -r 22:00 # 오후 10시에 재부팅
shutdown -c # 예약된 명령어 취소
shutdow - k +15 #15분 후에 종료된다는 메시지를 보내지만, 실제 종료는 x
```

* Runlevel

  * init 명령어 뒤에 붙는 숫자를 RunLevel이라고 함

  * | 런레벨 | 영문모드   |              설명              | 비고             |
    | ------ | ---------- | :----------------------------: | ---------------- |
    | 0      | Power Off  |           종료 모드            |                  |
    | 1      | Rescue     |        시스템 복구 모드        | 단일 사용자 모드 |
    | 2      | Multi-User |                                | 사용하지 않음    |
    | 3      | Multi-User | 텍스트 모드의 다중 사용자 모드 |                  |
    | 4      | Multi-User |                                | 사용하지 않음    |
    | 5      | Graphical  | 그래픽 모드의 다중 사용자 모드 |                  |
    | 6      | Reboot     |          재부팅 모드           |                  |

    